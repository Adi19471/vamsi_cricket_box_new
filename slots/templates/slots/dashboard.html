{% extends 'slots/base.html' %}
{% load static %}

{% block title %}Dashboard - Cricket Slot Booking{% endblock %}

{% block content %}

<style>
  /* HERO CAROUSEL HEIGHT */
  .hero-slider {
    min-height: 65vh;
  }

  .hero-slider .carousel-item {
    height: 600px;
    min-height: 600px;
    position: relative;
  }

  .hero-slider img {
    object-fit: cover;
    object-position: center;
    height: 100%;
    width: 100%;
  }

  /* Overlay */
  .hero-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 1;
  }

  /* Text Content */
  .hero-content {
    position: relative;
    z-index: 2;
    padding-top: 90px;
    padding-bottom: 60px;
    animation: fadeUp 1.2s ease;
  }

  /* Fade Up Animation */
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(25px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Card Hover Animation */
  .slot-card {
    transition: 0.25s ease;
  }

  .slot-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
  }

  /* Feature Card Hover */
  .feature-card {
    transition: 0.25s ease;
  }

  .feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
  }

  /* Button Styling */
  .btn-main {
    background: linear-gradient(90deg,#1B5E20,#2E7D32);
    border: none;
    font-weight: 700;
  }

  .btn-main:hover {
    background: linear-gradient(90deg,#0B1D13,#1B5E20);
  }

  /* Carousel arrows */
  .carousel-control-prev-icon,
  .carousel-control-next-icon {
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.7));
  }
</style>


<!-- HERO SLIDER (FADE CAROUSEL) -->
<section class="hero-slider">
  <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3500">

    <!-- Indicators -->
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
      <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
    </div>

    <div class="carousel-inner">

      <!-- Slide 1 -->
      <div class="carousel-item active">
        <img src="https://static.vecteezy.com/system/resources/thumbnails/001/984/555/small_2x/cricket-match-concept-with-stadium-and-background-free-vector.jpg" alt="Cricket Ground">
        <div class="hero-overlay"></div>

        <div class="container hero-content text-center text-white">
          <h1 class="fw-bold mb-2"
              style="font-size: clamp(2rem, 4vw, 3.5rem); line-height: 1.1;">
            <i class="fas fa-cricket me-2"></i> Cricket Slot Booking
          </h1>

          <p class="lead mb-2">Book your perfect cricket slot online</p>

          <p class="mb-4 opacity-75">
            Whether Box Cricket or Normal Cricket, find your ideal time slot and book instantly
          </p>

          <div class="d-flex flex-wrap gap-3 justify-content-center">
            {% if user.is_authenticated %}
              <a href="{% url 'slots:my_dashboard' %}" class="btn btn-light btn-lg px-4">
                <i class="fas fa-user me-2"></i> My Dashboard
              </a>
              <a href="{% url 'slots:my_bookings' %}" class="btn btn-outline-light btn-lg px-4">
                <i class="fas fa-ticket-alt me-2"></i> My Bookings
              </a>
            {% else %}
              <a href="{% url 'slots:login' %}" class="btn btn-light btn-lg px-4">
                <i class="fas fa-sign-in-alt me-2"></i> Login
              </a>
              <a href="{% url 'slots:register' %}" class="btn btn-outline-light btn-lg px-4">
                <i class="fas fa-user-plus me-2"></i> Register
              </a>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="carousel-item">
        <img src="https://static.vecteezy.com/system/resources/previews/020/747/165/large_2x/cricket-tournament-concept-with-trophy-cup-on-abstract-brush-stroke-effect-stadium-view-background-vector.jpg" alt="Box Cricket">
        <div class="hero-overlay"></div>

        <div class="container hero-content text-center text-white">
          <h1 class="fw-bold mb-2"
              style="font-size: clamp(2rem, 4vw, 3.2rem); line-height: 1.1;">
            <i class="fas fa-ticket-alt me-2"></i> Instant Slot Booking
          </h1>

          <p class="lead mb-2">Book slots in seconds</p>

          <p class="mb-4 opacity-75">
            No long waiting, no manual calls. Just choose time & confirm.
          </p>

          <div class="d-flex flex-wrap gap-3 justify-content-center">
            <a href="#slotsSection" class="btn btn-main btn-lg px-4 text-white">
              <i class="fas fa-calendar-check me-2"></i> View Slots
            </a>
          </div>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="carousel-item">
        <img src="https://img.freepik.com/free-vector/cricket-stadium-with-red-ball-creative-abstract-brush-stroke-background-sports-concept_1302-5476.jpg?w=740&t=st=1703217617~exp=1703218217~hmac=4065f575a4b39ae786a40079a33980a316711d7c758d9b7950350ae88967d0be" alt="Tournament">
        <div class="hero-overlay"></div>

        <div class="container hero-content text-center text-white">
          <h1 class="fw-bold mb-2"
              style="font-size: clamp(2rem, 4vw, 3.2rem); line-height: 1.1;">
            <i class="fas fa-users me-2"></i> Box & Normal Cricket
          </h1>

          <p class="lead mb-2">Choose your style</p>

          <p class="mb-4 opacity-75">
            Enjoy premium ground experience with affordable prices.
          </p>

          <div class="d-flex flex-wrap gap-3 justify-content-center">
            <a href="#featuresSection" class="btn btn-outline-light btn-lg px-4">
              <i class="fas fa-star me-2"></i> Explore Features
            </a>
          </div>
        </div>
      </div>

    </div>

    <!-- Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>

  </div>
</section>


<!-- AVAILABLE SLOTS -->
<section id="slotsSection" class="container py-5">
  <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-4">
    <h2 class="m-0 fw-bold">
      <i class="fas fa-calendar-check me-2"></i> Available Slots
    </h2>
  </div>

  {% if slots %}
    <div class="row g-4">
      {% for slot in slots %}
        <div class="col-12 col-md-6 col-lg-4">

          <div class="card h-100 shadow-sm border-0 slot-card"
               style="border-radius: 14px;">
            <div class="card-body d-flex flex-column">

              <div class="d-flex align-items-center justify-content-between mb-3">
                <div class="fw-bold">
                  {% if slot.cricket_type == 'box' %}
                    <i class="fas fa-square me-2"></i> Box Cricket
                  {% else %}
                    <i class="fas fa-circle me-2"></i> Normal Cricket
                  {% endif %}
                </div>

                {% if slot.is_available %}
                  <span class="badge bg-success rounded-pill px-3 py-2">
                    <i class="fas fa-check-circle me-1"></i> Available
                  </span>
                {% else %}
                  <span class="badge bg-danger rounded-pill px-3 py-2">
                    <i class="fas fa-times-circle me-1"></i> Full
                  </span>
                {% endif %}
              </div>

              <div class="p-3 rounded-3 border bg-light">
                <div class="d-flex justify-content-between py-1">
                  <span class="text-muted"><i class="fas fa-calendar me-2"></i>Date</span>
                  <span class="fw-semibold">{{ slot.date|date:'d M Y' }}</span>
                </div>
                <div class="d-flex justify-content-between py-1">
                  <span class="text-muted"><i class="fas fa-clock me-2"></i>Time</span>
                  <span class="fw-semibold">{{ slot.get_time_slot_display }}</span>
                </div>
                <div class="d-flex justify-content-between py-1">
                  <span class="text-muted"><i class="fas fa-users me-2"></i>Players</span>
                  <span class="fw-semibold">{{ slot.booked_count }}/{{ slot.max_players }}</span>
                </div>
                <div class="d-flex justify-content-between py-1">
                  <span class="text-muted"><i class="fas fa-rupee-sign me-2"></i>Price</span>
                  <span class="fw-semibold">â‚¹{{ slot.price }}</span>
                </div>
              </div>

              <div class="mt-auto pt-3">
                {% if slot.is_available %}
                  {% if user.is_authenticated %}
                    <a href="{% url 'slots:book_slot' slot.id %}"
                       class="btn btn-main w-100 btn-lg text-white">
                      <i class="fas fa-book me-2"></i> Book Now
                    </a>
                  {% else %}
                    <a href="{% url 'slots:login' %}?next={% url 'slots:book_slot' slot.id %}"
                       class="btn btn-main w-100 btn-lg text-white">
                      <i class="fas fa-sign-in-alt me-2"></i> Login to Book
                    </a>
                  {% endif %}
                {% else %}
                  <button class="btn btn-danger w-100 btn-lg" disabled>
                    <i class="fas fa-times me-2"></i> Slot Full
                  </button>
                {% endif %}
              </div>

            </div>
          </div>

        </div>
      {% endfor %}
    </div>

  {% else %}
    <div class="text-center py-5">
      <div class="display-6 mb-2">ðŸ˜•</div>
      <p class="text-muted m-0">No slots available currently. Check back later!</p>
    </div>
  {% endif %}

  <!-- PAGINATION -->
  {% if slots.has_other_pages %}
    <nav class="mt-4">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">

        {% if slots.has_previous %}
          <a class="btn btn-outline-secondary"
             href="?page={{ slots.previous_page_number }}">
            <i class="fas fa-arrow-left me-2"></i> Previous
          </a>
        {% else %}
          <button class="btn btn-outline-secondary" disabled>
            <i class="fas fa-arrow-left me-2"></i> Previous
          </button>
        {% endif %}

        <span class="text-muted">
          Page <span class="fw-semibold">{{ slots.number }}</span>
          of <span class="fw-semibold">{{ slots.paginator.num_pages }}</span>
        </span>

        {% if slots.has_next %}
          <a class="btn btn-outline-secondary"
             href="?page={{ slots.next_page_number }}">
            Next <i class="fas fa-arrow-right ms-2"></i>
          </a>
        {% else %}
          <button class="btn btn-outline-secondary" disabled>
            Next <i class="fas fa-arrow-right ms-2"></i>
          </button>
        {% endif %}

      </div>
    </nav>
  {% endif %}
</section>


<!-- FEATURES -->
<section id="featuresSection" class="container pb-5">
  <div class="row g-4">
    <div class="col-12 col-sm-6 col-lg-3">
      <div class="card h-100 border-0 shadow-sm feature-card" style="border-radius: 14px;">
        <div class="card-body text-center">
          <div class="fs-2 mb-2"><i class="fas fa-calendar-alt"></i></div>
          <h5 class="fw-bold">View Available Slots</h5>
          <p class="text-muted mb-0">Browse all available cricket slots with different timings and types</p>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-3">
      <div class="card h-100 border-0 shadow-sm feature-card" style="border-radius: 14px;">
        <div class="card-body text-center">
          <div class="fs-2 mb-2"><i class="fas fa-ticket-alt"></i></div>
          <h5 class="fw-bold">Easy Booking</h5>
          <p class="text-muted mb-0">Quick and secure booking process with instant confirmation</p>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-3">
      <div class="card h-100 border-0 shadow-sm feature-card" style="border-radius: 14px;">
        <div class="card-body text-center">
          <div class="fs-2 mb-2"><i class="fas fa-users"></i></div>
          <h5 class="fw-bold">Box & Normal Cricket</h5>
          <p class="text-muted mb-0">Choose between Box Cricket and Normal Cricket based on your preference</p>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-3">
      <div class="card h-100 border-0 shadow-sm feature-card" style="border-radius: 14px;">
        <div class="card-body text-center">
          <div class="fs-2 mb-2"><i class="fas fa-lock"></i></div>
          <h5 class="fw-bold">Secure & Safe</h5>
          <p class="text-muted mb-0">Your data is protected with advanced security measures</p>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
